
{% extends 'base.html' %}
{% block content %}
<h2>🎯 Goals</h2>
<form method="POST" class="mb-4">
  <div class="row g-2">
    <div class="col-md-3"><input type="text" name="goal_type" placeholder="Goal Type" class="form-control" required></div>
    <div class="col-md-3"><input type="text" name="target" placeholder="Target" class="form-control" required></div>
    <div class="col-md-2"><input type="number" step="0.1" name="target_value" placeholder="Value" class="form-control" required></div>
    <div class="col-md-2"><input type="text" name="unit" placeholder="Unit" class="form-control"></div>
    <div class="col-md-2"><input type="date" name="deadline" class="form-control"></div>
  </div>
  <button class="btn btn-success mt-2">Set Goal</button>
</form>

<h4>📜 Your Goals</h4>
<table class="table table-striped">
  <tr><th>Type</th><th>Target</th><th>Progress</th><th>Deadline</th><th>Status</th><th>Update</th></tr>
  {% for goal in goals %}
    <tr>
      <td>{{ goal.goal_type }}</td>
      <td>{{ goal.target }}</td>
      <td>{{ goal.current_value }}/{{ goal.target_value }} {{ goal.unit }}</td>
      <td>{{ goal.deadline.strftime('%Y-%m-%d') if goal.deadline else 'N/A' }}</td>
      <td>{% if goal.completed %}✅ Completed{% else %}⏳ In Progress{% endif %}</td>
      <td>
        <form method="POST" action="{{ url_for('update_goal', goal_id=goal.id) }}">
          <input type="number" step="0.1" name="current_value" placeholder="Update" class="form-control mb-1">
          <button class="btn btn-primary btn-sm">Update</button>
        </form>
      </td>
    </tr>
  {% else %}
    <tr><td colspan="6" class="text-muted">No goals set yet 🎯</td></tr>
  {% endfor %}
</table>
{% endblock %}
